{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ParentDashboard=()=>{const[studentDetails,setStudentDetails]=useState({});const[notifications,setNotifications]=useState([]);const[learningMaterials,setLearningMaterials]=useState([]);// Fetch Student Details\nconst getStudentDetails=async studentId=>{try{const token=localStorage.getItem(\"token\");const response=await axios.get(`https://seclink-server.onrender.com/students/${studentId}`,{headers:{Authorization:`Bearer ${token}`}});setStudentDetails(response.data);}catch(error){var _error$response,_error$response$data;console.error(\"Error fetching student details:\",((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);}};// Fetch Notifications\nconst getNotifications=async()=>{try{const token=localStorage.getItem(\"token\");const response=await axios.get(\"https://seclink-server.onrender.com/notifications\",{headers:{Authorization:`Bearer ${token}`}});setNotifications(response.data);}catch(error){var _error$response2,_error$response2$data;console.error(\"Error fetching notifications:\",((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message);}};// Fetch Learning Materials\nconst downloadLearningMaterials=async()=>{try{const token=localStorage.getItem(\"token\");const response=await axios.get(\"https://seclink-server.onrender.com/learning-material\",{headers:{Authorization:`Bearer ${token}`}});setLearningMaterials(response.data);}catch(error){var _error$response3,_error$response3$data;console.error(\"Error fetching learning materials:\",((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||error.message);}};// Fetch the data when the component mounts\nuseEffect(()=>{const exampleStudentId=1;// Replace with actual logic to get the studentId\ngetStudentDetails(exampleStudentId);getNotifications();downloadLearningMaterials();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Parent Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"studentDetails\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Student Details\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Class\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Overall Grade\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Parent ID\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:studentDetails.id}),/*#__PURE__*/_jsx(\"td\",{children:studentDetails.name}),/*#__PURE__*/_jsx(\"td\",{children:studentDetails.class_name}),/*#__PURE__*/_jsx(\"td\",{children:studentDetails.age}),/*#__PURE__*/_jsx(\"td\",{children:studentDetails.subject}),/*#__PURE__*/_jsx(\"td\",{children:studentDetails.overall_grade}),/*#__PURE__*/_jsx(\"td\",{children:studentDetails.parent_id})]})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"notifications\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Notifications\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Message\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:notifications.map((notification,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:notification.date}),/*#__PURE__*/_jsx(\"td\",{children:notification.message})]},index))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"learningMaterials\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Learning Materials\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Download\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:learningMaterials.map((material,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:material.title}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:`https://seclink-server.onrender.com/download/${material.file_path}`,download:true,children:\"Download\"})})]},index))})]})})]})]});};export default ParentDashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","ParentDashboard","studentDetails","setStudentDetails","notifications","setNotifications","learningMaterials","setLearningMaterials","getStudentDetails","studentId","token","localStorage","getItem","response","get","headers","Authorization","data","error","_error$response","_error$response$data","console","message","getNotifications","_error$response2","_error$response2$data","downloadLearningMaterials","_error$response3","_error$response3$data","exampleStudentId","children","id","className","name","class_name","age","subject","overall_grade","parent_id","map","notification","index","date","material","title","href","file_path","download"],"sources":["/home/keneddy/development/code/phase4/SecLink-Ke/seclinkkenya/client/src/components/ParentDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nconst ParentDashboard = () => {\n  const [studentDetails, setStudentDetails] = useState({});\n  const [notifications, setNotifications] = useState([]);\n  const [learningMaterials, setLearningMaterials] = useState([]);\n\n  // Fetch Student Details\n  const getStudentDetails = async (studentId) => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const response = await axios.get(\n        `https://seclink-server.onrender.com/students/${studentId}`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n      setStudentDetails(response.data);\n    } catch (error) {\n      console.error(\n        \"Error fetching student details:\",\n        error.response?.data?.message || error.message\n      );\n    }\n  };\n\n  // Fetch Notifications\n  const getNotifications = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const response = await axios.get(\n        \"https://seclink-server.onrender.com/notifications\",\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n      setNotifications(response.data);\n    } catch (error) {\n      console.error(\n        \"Error fetching notifications:\",\n        error.response?.data?.message || error.message\n      );\n    }\n  };\n\n  // Fetch Learning Materials\n  const downloadLearningMaterials = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const response = await axios.get(\n        \"https://seclink-server.onrender.com/learning-material\",\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n      setLearningMaterials(response.data);\n    } catch (error) {\n      console.error(\n        \"Error fetching learning materials:\",\n        error.response?.data?.message || error.message\n      );\n    }\n  };\n\n  // Fetch the data when the component mounts\n  useEffect(() => {\n    const exampleStudentId = 1; // Replace with actual logic to get the studentId\n    getStudentDetails(exampleStudentId);\n    getNotifications();\n    downloadLearningMaterials();\n  }, []);\n\n  return (\n    <div>\n      <h1>Parent Dashboard</h1>\n\n      <div id=\"studentDetails\">\n        <h2>Student Details</h2>\n        <div className=\"table-container\">\n          <table>\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>Name</th>\n                <th>Class</th>\n                <th>Age</th>\n                <th>Subject</th>\n                <th>Overall Grade</th>\n                <th>Parent ID</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>{studentDetails.id}</td>\n                <td>{studentDetails.name}</td>\n                <td>{studentDetails.class_name}</td>\n                <td>{studentDetails.age}</td>\n                <td>{studentDetails.subject}</td>\n                <td>{studentDetails.overall_grade}</td>\n                <td>{studentDetails.parent_id}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <div id=\"notifications\">\n        <h2>Notifications</h2>\n        <div className=\"table-container\">\n          <table>\n            <thead>\n              <tr>\n                <th>Date</th>\n                <th>Message</th>\n              </tr>\n            </thead>\n            <tbody>\n              {notifications.map((notification, index) => (\n                <tr key={index}>\n                  <td>{notification.date}</td>\n                  <td>{notification.message}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <div id=\"learningMaterials\">\n        <h2>Learning Materials</h2>\n        <div className=\"table-container\">\n          <table>\n            <thead>\n              <tr>\n                <th>Title</th>\n                <th>Download</th>\n              </tr>\n            </thead>\n            <tbody>\n              {learningMaterials.map((material, index) => (\n                <tr key={index}>\n                  <td>{material.title}</td>\n                  <td>\n                    <a\n                      href={`https://seclink-server.onrender.com/download/${material.file_path}`}\n                      download\n                    >\n                      Download\n                    </a>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ParentDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}